a:2:{i:0;a:3:{s:10:"sourceFile";s:73:"/var/www/html/plansys/modules/dev/forms/genmodel/DevGenModelRelations.php";s:4:"file";a:122:{i:0;s:5:"<?php";i:1;s:0:"";i:2;s:41:"class DevGenModelRelations extends Form {";i:3;s:0:"";i:4;s:48:"    public static function getRels($pathModel) {";i:5;s:31:"        if ($pathModel != "") {";i:6;s:56:"            $modelClass = end(explode(".", $pathModel));";i:7;s:12:"            ";i:8;s:54:"            if (method_exists($modelClass, 'model')) {";i:9;s:46:"                $model = $modelClass::model();";i:10;s:61:"                if (is_subclass_of($model, 'ActiveRecord')) {";i:11;s:61:"                    if (method_exists($model, "relations")) {";i:12;s:54:"                        $rels = ($model->relations());";i:13;s:37:"                        $return = [];";i:14;s:51:"                        foreach ($rels as $k=>$r) {";i:15;s:36:"                            $ret = [";i:16;s:45:"                                'name' => $k,";i:17;s:48:"                                'type' => $r[0],";i:18;s:54:"                                'modelClass' => $r[1],";i:19;s:46:"                                'fk' => $r[2],";i:20;s:44:"                                'raw' => $r ";i:21;s:30:"                            ];";i:22;s:45:"                            $return[] = $ret;";i:23;s:25:"                        }";i:24;s:39:"                        return $return;";i:25;s:21:"                    }";i:26;s:30:"                    return [];";i:27;s:24:"                } else {";i:28;s:33:"                    return false;";i:29;s:17:"                }";i:30;s:20:"            } else {";i:31;s:29:"                return false;";i:32;s:13:"            }";i:33;s:9:"        }";i:34;s:5:"    }";i:35;s:0:"";i:36;s:31:"    public function getForm() {";i:37;s:22:"        return array (";i:38;s:45:"            'title' => 'Gen Model Relations',";i:39;s:31:"            'layout' => array (";i:40;s:39:"                'name' => 'full-width',";i:41;s:33:"                'data' => array (";i:42;s:37:"                    'col1' => array (";i:43;s:45:"                        'type' => 'mainform',";i:44;s:40:"                        'size' => '100',";i:45;s:22:"                    ),";i:46;s:18:"                ),";i:47;s:14:"            ),";i:48;s:29:"            'inlineJS' => '',";i:49;s:10:"        );";i:50;s:5:"    }";i:51;s:0:"";i:52;s:33:"    public function getFields() {";i:53;s:22:"        return array (";i:54;s:19:"            array (";i:55;s:33:"                'type' => 'Text',";i:56;s:14:"            ),";i:57;s:19:"            array (";i:58;s:34:"                'name' => 'dsRel',";i:59;s:37:"                'fieldType' => 'php',";i:60;s:80:"                'php' => 'DevGenModelRelations::getRels(@$_GET[\\"active\\"]);',";i:61;s:39:"                'type' => 'DataSource',";i:62;s:14:"            ),";i:63;s:19:"            array (";i:64;s:33:"                'type' => 'Text',";i:65;s:142:"                'value' => '<div class=\"alert alert-warning\" ng-if=\"dsRel.data[0] === false\" style=\"margin-top:15px;text-align:center;\">";i:66;s:47:"    This model does not have database relations";i:67;s:8:"</div>',";i:68;s:14:"            ),";i:69;s:19:"            array (";i:70;s:38:"                'showBorder' => 'Yes',";i:71;s:36:"                'column1' => array (";i:72;s:27:"                    array (";i:73;s:50:"                        'renderInEditor' => 'Yes',";i:74;s:41:"                        'type' => 'Text',";i:75;s:63:"                        'value' => '<div class=\"text-center\">";i:76;s:75:"    <div ng-show=\"isChanged\" class=\"btn btn-default btn-sm btn-success\"";i:77;s:45:"    ng-click=\"dsRel.query();markUnchange()\"";i:78;s:57:"    ><i class=\"fa fa-refresh\"></i> Load Relations</div>";i:79;s:8:"</div>',";i:80;s:22:"                    ),";i:81;s:27:"                    array (";i:82;s:42:"                        'name' => 'lvRel',";i:83;s:102:"                        'templateForm' => 'application.modules.dev.forms.genmodel.DevGenModelRelForm',";i:84;s:48:"                        'datasource' => 'dsRel',";i:85;s:44:"                        'options' => array (";i:86;s:54:"                            'ng-show' => '!isChanged',";i:87;s:26:"                        ),";i:88;s:53:"                        'singleViewOption' => array (";i:89;s:44:"                            'name' => 'val',";i:90;s:50:"                            'fieldType' => 'text',";i:91;s:46:"                            'labelWidth' => 0,";i:92;s:47:"                            'fieldWidth' => 12,";i:93;s:53:"                            'fieldOptions' => array (";i:94;s:50:"                                'ng-delay' => 500,";i:95;s:30:"                            ),";i:96;s:26:"                        ),";i:97;s:45:"                        'type' => 'ListView',";i:98;s:22:"                    ),";i:99;s:27:"                    array (";i:100;s:41:"                        'type' => 'Text',";i:101;s:79:"                        'value' => '<column-placeholder></column-placeholder>',";i:102;s:22:"                    ),";i:103;s:18:"                ),";i:104;s:30:"                'w1' => '50%',";i:105;s:30:"                'w2' => '50%',";i:106;s:36:"                'options' => array (";i:107;s:57:"                    'ng-if' => 'dsRel.data[0] !== false',";i:108;s:18:"                ),";i:109;s:45:"                'perColumnOptions' => array (";i:110;s:41:"                    'style' => 'padding',";i:111;s:18:"                ),";i:112;s:40:"                'type' => 'ColumnField',";i:113;s:14:"            ),";i:114;s:19:"            array (";i:115;s:33:"                'type' => 'Text',";i:116;s:57:"                'value' => '<hr style=\\"margin:0px\\">',";i:117;s:14:"            ),";i:118;s:10:"        );";i:119;s:5:"    }";i:120;s:0:"";i:121;s:1:"}";}s:7:"methods";a:3:{s:7:"getRels";a:2:{s:4:"line";i:4;s:6:"length";i:31;}s:7:"getForm";a:2:{s:4:"line";i:36;s:6:"length";i:15;}s:9:"getFields";a:2:{s:4:"line";i:52;s:6:"length";i:68;}}}i:1;N;}