a:2:{i:0;a:3:{s:10:"sourceFile";s:66:"/var/www/html/plansys/modules/dev/forms/service/DevServiceForm.php";s:4:"file";a:189:{i:0;s:5:"<?php";i:1;s:0:"";i:2;s:41:"class DevServiceForm extends DevService {";i:3;s:0:"";i:4;s:20:"    public $content;";i:5;s:29:"    public $runningInstances;";i:6;s:29:"    public $stoppedInstances;";i:7;s:17:"    public $view;";i:8;s:20:"    public $lastRun;";i:9;s:4:"    ";i:10;s:38:"    public static function load($id) {";i:11;s:47:"        $svc = ServiceManager::getService($id);";i:12;s:28:"        if (is_null($svc)) {";i:13;s:25:"            return false;";i:14;s:9:"        }";i:15;s:24:"        $instances = [];";i:16;s:36:"        $model = new DevServiceForm;";i:17;s:34:"        $model->attributes = $svc;";i:18;s:79:"        $model->content = file_get_contents(ServiceManager::getFilePath($svc));";i:19;s:22:"        return $model;";i:20;s:5:"    }";i:21;s:0:"";i:22;s:31:"    public function getForm() {";i:23;s:22:"        return array (";i:24;s:40:"            'title' => 'Service Detail',";i:25;s:31:"            'layout' => array (";i:26;s:39:"                'name' => 'full-width',";i:27;s:33:"                'data' => array (";i:28;s:37:"                    'col1' => array (";i:29;s:40:"                        'size' => '100',";i:30;s:41:"                        'sizetype' => '',";i:31;s:45:"                        'type' => 'mainform',";i:32;s:22:"                    ),";i:33;s:18:"                ),";i:34;s:14:"            ),";i:35;s:46:"            'inlineJS' => 'DevServiceForm.js',";i:36;s:10:"        );";i:37;s:5:"    }";i:38;s:0:"";i:39;s:33:"    public function getFields() {";i:40;s:22:"        return array (";i:41;s:19:"            array (";i:42;s:31:"                'name' => 'ws',";i:43;s:44:"                'type' => 'WebSocketClient',";i:44;s:40:"                'ctrl' => 'dev/service',";i:45;s:14:"            ),";i:46;s:19:"            array (";i:47;s:33:"                'type' => 'Text',";i:48;s:54:"                'value' => '<tabset class=\'tab-set\'>";i:49;s:2:"',";i:50;s:14:"            ),";i:51;s:19:"            array (";i:52;s:40:"                'display' => 'all-line',";i:53;s:33:"                'type' => 'Text',";i:54;s:48:"                'value' => '<!-- BACK BUTTON -->";i:55;s:184:"<a ng-href=\"{{ Yii.app.createUrl(\'/dev/service/index\') }}\" class=\"btn btn-xs btn-default\" style=\"color:#000;font-size:11px;font-weight:bold;float:left;margin:5px 2px 0px -8px\">";i:56;s:43:"    <i class=\"fa fa-caret-left\"></i> Back";i:57;s:6:"</a>',";i:58;s:14:"            ),";i:59;s:19:"            array (";i:60;s:40:"                'display' => 'all-line',";i:61;s:33:"                'type' => 'Text',";i:62;s:48:"                'value' => '<!-- CODE EDITOR -->";i:63;s:38:"<tab ng-click=\"changeTab(\'code\')\">";i:64;s:17:"    <tab-heading>";i:65;s:48:"        <i id=\'code\' class=\"fa fa-code\"></i>";i:66;s:49:"        {{model.command}} &bull; {{model.action}}";i:67;s:18:"    </tab-heading>";i:68;s:8:"</tab>',";i:69;s:14:"            ),";i:70;s:19:"            array (";i:71;s:40:"                'display' => 'all-line',";i:72;s:33:"                'type' => 'Text',";i:73;s:55:"                'value' => '<!-- SERVICE LOG: START -->";i:74;s:37:"<tab ng-click=\"changeTab(\'log\')\">";i:75;s:18:"    <tab-heading >";i:76;s:47:"        <i id=\'log\' class=\"fa fa-bars\"></i>";i:77;s:19:"        Service Log";i:78;s:12:"        <div";i:79;s:58:"        style=\"margin:-1px -3px 0px 5px;font-size:10px;\"";i:80;s:34:"        class=\"pull-right label\"";i:81;s:20:"        ng-class=\"{";i:82;s:48:"            \'label-success\': params.isRunning,";i:83;s:49:"            \'label-default\': !params.isRunning,";i:84;s:11:"        }\"";i:85;s:9:"        >";i:86;s:34:"            {{ params.isRunning ? ";i:87;s:29:"                \'RUNNING\' :";i:88;s:30:"                \'STOPPED\' }}";i:89;s:14:"        </div>";i:90;s:18:"    </tab-heading>";i:91;s:6:"</tab>";i:92;s:27:"<!-- SERVICE LOG: END -->',";i:93;s:14:"            ),";i:94;s:19:"            array (";i:95;s:40:"                'display' => 'all-line',";i:96;s:33:"                'type' => 'Text',";i:97;s:44:"                'value' => '<!-- BUTTONS -->";i:98;s:141:"<div class=\"btn btn-xs btn-default pull-right\" style=\"font-size:11px;font-weight:bold;margin:4px 4px 0px 0px;\" ng-click=\"popup.open()\">";i:99;s:34:"    <i class=\"fa fa-pencil\"></i>";i:100;s:16:"    Edit Service";i:101;s:6:"</div>";i:102;s:0:"";i:103;s:163:"<div ng-show=\"params.isRunning\" class=\"btn btn-xs btn-danger pull-right\" style=\"font-size:11px;font-weight:bold;margin:4px 4px 0px 0px;\" ng-click=\"stop()\">";i:104;s:103:"    <i class=\"fa fa-stop\"></i> Stop All [ CTRL + <i class=\"fa fa fa-level-down fa-rotate-90\"></i> ]";i:105;s:6:"</div>";i:106;s:0:"";i:107;s:166:"<div ng-show=\"!params.isRunning\" class=\"btn btn-xs btn-success pull-right\" style=\"font-size:11px;font-weight:bold;margin:4px 4px 0px 0px;\" ng-click=\"start()\">";i:108;s:98:"    <i class=\"fa fa-play\"></i> Run [ CTRL + <i class=\"fa fa fa-level-down fa-rotate-90\"></i> ]";i:109;s:6:"</div>";i:110;s:0:"";i:111;s:278:"<div ng-show=\"!!params.isRunning && (model.instance == \'parallel\' || (model.instance == \'single\' && model.singleInstanceMode == \'kill\')) \" class=\"btn btn-xs btn-success pull-right\" style=\"font-size:11px;font-weight:bold;margin:4px 4px 0px 0px;\" ng-click=\"start()\">";i:112;s:36:"    <i class=\"fa fa-play\"></i> Run";i:113;s:6:"</div>";i:114;s:0:"";i:115;s:0:"";i:116;s:69:"<div class=\"btn btn-xs\" style=\"font-size:11px;font-weight:bold\" >";i:117;s:14:"    {{status}}";i:118;s:8:"</div>',";i:119;s:14:"            ),";i:120;s:19:"            array (";i:121;s:33:"                'type' => 'Text',";i:122;s:39:"                'value' => '</tabset>',";i:123;s:14:"            ),";i:124;s:19:"            array (";i:125;s:40:"                'display' => 'all-line',";i:126;s:33:"                'type' => 'Text',";i:127;s:47:"                'value' => '<!-- ACE EDITOR -->";i:128;s:71:"    <div style=\'padding:0px 0px;\' ng-show=\"currentTab == \'code\'\">";i:129;s:43:"        <div class=\"text-editor-builder\">";i:130;s:80:"            <div class=\"text-editor\" ui-ace=\"aceConfig({onLoad:onAceLoad})\" ";i:131;s:81:"style=\"position:absolute;top:27px;font-size:14px;left:0px;right:0px;bottom:0px\"";i:132;s:27:"ng-model=\"model.content\">";i:133;s:18:"            </div>";i:134;s:14:"        </div>";i:135;s:10:"    </div>";i:136;s:6:"    ',";i:137;s:14:"            ),";i:138;s:19:"            array (";i:139;s:40:"                'display' => 'all-line',";i:140;s:33:"                'type' => 'Text',";i:141;s:47:"                'value' => '<!-- LOG WINDOW -->";i:142;s:93:"    <div style=\"margin:0px -15px;padding:10px;font-size:12px;border-bottom:1px solid #999\">";i:143;s:14:"        <span>";i:144;s:102:"        Instance ID: <select ng-model=\"selectedInstancePid\" ng-change=\"selInstanceChange($event)\">";i:145;s:50:"            <optgroup label=\"Running Instances\">";i:146;s:42:"                <option ng-value=\"i.Pid\"";i:147;s:61:"                    ng-repeat=\"i in model.runningInstances\"";i:148;s:37:"                >{{ i.pid }}</option>";i:149;s:23:"            </optgroup>";i:150;s:50:"            <optgroup label=\"Stopped Instances\">";i:151;s:42:"                <option ng-value=\"i.Pid\"";i:152;s:61:"                    ng-repeat=\"i in model.stoppedInstances\"";i:153;s:37:"                >{{ i.pid }}</option>";i:154;s:23:"            </optgroup>";i:155;s:17:"        </select>";i:156;s:8:"        ";i:157;s:22:"        &nbsp;|&nbsp; ";i:158;s:73:"        <span ng-if=\"!!selectedInstance && !selectedInstance.stopTime\">";i:159;s:81:"        Started {{ date(\"Y-m-d H:i:s\", selectedInstance.startTime) | timeago }}";i:160;s:21:"        &nbsp;|&nbsp;";i:161;s:15:"        </span>";i:162;s:72:"        <span ng-if=\"!!selectedInstance && selectedInstance.stopTime\">";i:163;s:140:"        Stopped at {{ date(\"Y/m/d H:i:s\", selectedInstance.stopTime) }} ({{ date(\"Y-m-d H:i:s\", selectedInstance.stopTime) | timeago }})";i:164;s:15:"        </span>";i:165;s:177:"        <a ng-show=\"!!selectedInstance && !selectedInstance.stopTime\" ng-url=\"sys/service/view&name={{ model.name }}&id={{selectedInstance.pid}}\" style=\"margin:-10px 0px;\"";i:166;s:59:"        target=\"_blank\" class=\"btn btn-success btn-xs\">";i:167;s:58:"             View Controller <i class=\"fa fa-share\"></i>";i:168;s:12:"        </a>";i:169;s:10:"    </div>";i:170;s:4:"    ";i:171;s:177:"    <pre id=\"logwindow\" ng-if=\"currentTab == \'log\'\" style=\'margin:0px;border-radius:0px;position:absolute;top:63px;left:0px;right:0px;bottom:0px;overflow-y:auto;\'></pre>";i:172;s:2:"',";i:173;s:14:"            ),";i:174;s:19:"            array (";i:175;s:40:"                'type' => 'PopupWindow',";i:176;s:34:"                'name' => 'popup',";i:177;s:36:"                'options' => array (";i:178;s:38:"                    'height' => '450',";i:179;s:37:"                    'width' => '600',";i:180;s:18:"                ),";i:181;s:32:"                'mode' => 'url',";i:182;s:72:"                'url' => '/dev/service/editService&id={{ model.name }}',";i:183;s:87:"                'parentForm' => 'application.modules.dev.forms.service.DevServiceForm',";i:184;s:14:"            ),";i:185;s:10:"        );";i:186;s:5:"    }";i:187;s:0:"";i:188;s:1:"}";}s:7:"methods";a:3:{s:4:"load";a:2:{s:4:"line";i:10;s:6:"length";i:11;}s:7:"getForm";a:2:{s:4:"line";i:22;s:6:"length";i:16;}s:9:"getFields";a:2:{s:4:"line";i:39;s:6:"length";i:148;}}}i:1;N;}