a:2:{i:0;a:3:{s:10:"sourceFile";s:63:"/var/www/html/plansys/components/ui/FormFields/CheckboxList.php";s:4:"file";a:373:{i:0;s:5:"<?php";i:1;s:0:"";i:2;s:3:"/**";i:3;s:21:" * Class CheckboxList";i:4;s:16:" * @author rizky";i:5;s:3:" */";i:6;s:38:"class CheckboxList extends FormField {";i:7;s:0:"";i:8;s:7:"    /**";i:9;s:55:"     * @return array me-return array property Checkbox.";i:10;s:7:"     */";i:11;s:42:"    public function getFieldProperties() {";i:12;s:22:"        return array (";i:13;s:19:"            array (";i:14;s:43:"                'label' => 'Checkbox Mode',";i:15;s:33:"                'name' => 'mode',";i:16;s:36:"                'options' => array (";i:17;s:48:"                    'ng-model' => 'active.mode',";i:18;s:57:"                    'ng-change' => 'active.name = \'\';',";i:19;s:18:"                ),";i:20;s:59:"                'listExpr' => '[\'Default\',\'Relation\']',";i:21;s:41:"                'type' => 'DropDownList',";i:22;s:14:"            ),";i:23;s:19:"            array (";i:24;s:40:"                'label' => 'Field Name',";i:25;s:33:"                'name' => 'name',";i:26;s:36:"                'options' => array (";i:27;s:48:"                    'ng-model' => 'active.name',";i:28;s:56:"                    'ng-change' => 'changeActiveName()',";i:29;s:50:"                    'ps-list' => 'modelFieldList',";i:30;s:60:"                    'ng-if' => 'active.mode == \'Default\'',";i:31;s:18:"                ),";i:32;s:35:"                'list' => array (),";i:33;s:38:"                'searchable' => 'Yes',";i:34;s:37:"                'showOther' => 'Yes',";i:35;s:41:"                'type' => 'DropDownList',";i:36;s:14:"            ),";i:37;s:19:"            array (";i:38;s:43:"                'label' => 'Relation Name',";i:39;s:33:"                'name' => 'name',";i:40;s:36:"                'options' => array (";i:41;s:48:"                    'ng-model' => 'active.name',";i:42;s:78:"                    'ng-change' => 'generateRelCheckbox();changeActiveName()',";i:43;s:48:"                    'ps-list' => 'relFieldList',";i:44;s:61:"                    'ng-if' => 'active.mode == \'Relation\'',";i:45;s:58:"                    'ng-init' => 'generateRelCheckbox();',";i:46;s:18:"                ),";i:47;s:35:"                'list' => array (),";i:48;s:38:"                'searchable' => 'Yes',";i:49;s:37:"                'showOther' => 'Yes',";i:50;s:41:"                'type' => 'DropDownList',";i:51;s:14:"            ),";i:52;s:19:"            array (";i:53;s:42:"                'label' => 'Target Field',";i:54;s:37:"                'name' => 'relField',";i:55;s:36:"                'options' => array (";i:56;s:52:"                    'ng-model' => 'active.relField',";i:57;s:44:"                    'ng-change' => 'save()',";i:58;s:53:"                    'ps-list' => 'relationFieldList',";i:59;s:63:"                    'ng-show' => 'active.mode == \'Relation\'',";i:60;s:18:"                ),";i:61;s:35:"                'list' => array (),";i:62;s:38:"                'searchable' => 'Yes',";i:63;s:37:"                'showOther' => 'Yes',";i:64;s:41:"                'type' => 'DropDownList',";i:65;s:14:"            ),";i:66;s:19:"            array (";i:67;s:33:"                'type' => 'Text',";i:68;s:35:"                'value' => '<hr/>',";i:69;s:14:"            ),";i:70;s:19:"            array (";i:71;s:35:"                'label' => 'Label',";i:72;s:34:"                'name' => 'label',";i:73;s:36:"                'options' => array (";i:74;s:49:"                    'ng-model' => 'active.label',";i:75;s:44:"                    'ng-change' => 'save()',";i:76;s:40:"                    'ng-delay' => '500',";i:77;s:18:"                ),";i:78;s:38:"                'type' => 'TextField',";i:79;s:14:"            ),";i:80;s:19:"            array (";i:81;s:36:"                'label' => 'Layout',";i:82;s:35:"                'name' => 'layout',";i:83;s:36:"                'options' => array (";i:84;s:50:"                    'ng-model' => 'active.layout',";i:85;s:45:"                    'ng-change' => 'save();',";i:86;s:40:"                    'ng-delay' => '500',";i:87;s:18:"                ),";i:88;s:67:"                'listExpr' => 'array(\'Horizontal\',\'Vertical\')',";i:89;s:36:"                'fieldWidth' => '6',";i:90;s:41:"                'type' => 'DropDownList',";i:91;s:14:"            ),";i:92;s:19:"            array (";i:93;s:41:"                'label' => 'Item Layout',";i:94;s:39:"                'name' => 'itemLayout',";i:95;s:36:"                'options' => array (";i:96;s:54:"                    'ng-model' => 'active.itemLayout',";i:97;s:44:"                    'ng-change' => 'save()',";i:98;s:40:"                    'ng-delay' => '500',";i:99;s:18:"                ),";i:100;s:67:"                'listExpr' => 'array(\'Horizontal\',\'Vertical\')',";i:101;s:36:"                'fieldWidth' => '6',";i:102;s:41:"                'type' => 'DropDownList',";i:103;s:14:"            ),";i:104;s:19:"            array (";i:105;s:41:"                'label' => 'Label Width',";i:106;s:39:"                'name' => 'labelWidth',";i:107;s:36:"                'fieldWidth' => '4',";i:108;s:36:"                'options' => array (";i:109;s:54:"                    'ng-model' => 'active.labelWidth',";i:110;s:44:"                    'ng-change' => 'save()',";i:111;s:40:"                    'ng-delay' => '500',";i:112;s:70:"                    'ng-disabled' => 'active.layout == \'Vertical\';',";i:113;s:18:"                ),";i:114;s:38:"                'type' => 'TextField',";i:115;s:14:"            ),";i:116;s:19:"            array (";i:117;s:52:"                'label' => 'Convert List to String',";i:118;s:44:"                'name' => 'convertToString',";i:119;s:36:"                'options' => array (";i:120;s:59:"                    'ng-model' => 'active.convertToString',";i:121;s:44:"                    'ng-change' => 'save()',";i:122;s:40:"                    'ng-delay' => '500',";i:123;s:60:"                    'ng-if' => 'active.mode == \'Default\'',";i:124;s:18:"                ),";i:125;s:54:"                'listExpr' => 'array(\'Yes\',\'No\')',";i:126;s:36:"                'fieldWidth' => '4',";i:127;s:41:"                'type' => 'DropDownList',";i:128;s:14:"            ),";i:129;s:19:"            array (";i:130;s:43:"                'label' => 'CheckBox Item',";i:131;s:33:"                'name' => 'list',";i:132;s:33:"                'show' => 'Show',";i:133;s:36:"                'options' => array (";i:134;s:98:"                    'ng-hide' => 'active.listExpr != \'\' || active.options[\'ps-list\'] != null',";i:135;s:18:"                ),";i:136;s:43:"                'allowSpaceOnKey' => 'Yes',";i:137;s:41:"                'type' => 'KeyValueGrid',";i:138;s:14:"            ),";i:139;s:19:"            array (";i:140;s:45:"                'label' => 'List Expression',";i:141;s:42:"                'fieldname' => 'listExpr',";i:142;s:36:"                'options' => array (";i:143;s:71:"                    'ng-hide' => 'active.options[\'ps-list\'] != null',";i:144;s:65:"                    'ps-valid' => 'active.list = result;save();',";i:145;s:18:"                ),";i:146;s:147:"                'desc' => '<i class=\'fa fa-warning\'></i> WARNING: Using List Expression will replace <i>CheckBox Item</i>with expression result',";i:147;s:44:"                'type' => 'ExpressionField',";i:148;s:14:"            ),";i:149;s:19:"            array (";i:150;s:37:"                'label' => 'Options',";i:151;s:36:"                'name' => 'options',";i:152;s:41:"                'type' => 'KeyValueGrid',";i:153;s:14:"            ),";i:154;s:19:"            array (";i:155;s:43:"                'label' => 'Label Options',";i:156;s:41:"                'name' => 'labelOptions',";i:157;s:41:"                'type' => 'KeyValueGrid',";i:158;s:14:"            ),";i:159;s:19:"            array (";i:160;s:43:"                'label' => 'Field Options',";i:161;s:41:"                'name' => 'fieldOptions',";i:162;s:41:"                'type' => 'KeyValueGrid',";i:163;s:14:"            ),";i:164;s:10:"        );";i:165;s:5:"    }";i:166;s:0:"";i:167;s:29:"    /** @var string $label */";i:168;s:23:"    public $label = '';";i:169;s:0:"";i:170;s:28:"    /** @var string $name */";i:171;s:22:"    public $name = '';";i:172;s:0:"";i:173;s:61:"    /** @var string $value digunakan pada function checked */";i:174;s:23:"    public $value = '';";i:175;s:0:"";i:176;s:28:"    /** @var string $list */";i:177;s:22:"    public $list = '';";i:178;s:31:"    public $formattedList = '';";i:179;s:0:"";i:180;s:32:"    /** @var string $listExpr */";i:181;s:26:"    public $listExpr = '';";i:182;s:0:"";i:183;s:30:"    /** @var string $layout */";i:184;s:34:"    public $layout = 'Horizontal';";i:185;s:0:"";i:186;s:34:"    /** @var string $itemLayout */";i:187;s:36:"    public $itemLayout = 'Vertical';";i:188;s:0:"";i:189;s:35:"    /** @var integer $labelWidth */";i:190;s:27:"    public $labelWidth = 4;";i:191;s:0:"";i:192;s:39:"    /** @var string $convertToString */";i:193;s:36:"    public $convertToString = 'Yes';";i:194;s:0:"";i:195;s:35:"    /** @var integer $fieldWidth */";i:196;s:27:"    public $fieldWidth = 8;";i:197;s:0:"";i:198;s:30:"    /** @var array $options */";i:199;s:25:"    public $options = [];";i:200;s:0:"";i:201;s:35:"    /** @var array $labelOptions */";i:202;s:30:"    public $labelOptions = [];";i:203;s:0:"";i:204;s:35:"    /** @var array $fieldOptions */";i:205;s:30:"    public $fieldOptions = [];";i:206;s:0:"";i:207;s:29:"    public $mode = 'Default';";i:208;s:4:"    ";i:209;s:26:"    public $relField = '';";i:210;s:0:"";i:211;s:35:"    /** @var string $toolbarName */";i:212;s:49:"    public static $toolbarName = "Checkbox List";";i:213;s:0:"";i:214;s:32:"    /** @var string $category */";i:215;s:47:"    public static $category = "User Interface";";i:216;s:0:"";i:217;s:35:"    /** @var string $toolbarIcon */";i:218;s:54:"    public static $toolbarIcon = "fa fa-check-square";";i:219;s:0:"";i:220;s:7:"    /**";i:221;s:63:"     * @return array me-return array javascript yang di-include";i:222;s:7:"     */";i:223;s:33:"    public function includeJS() {";i:224;s:37:"        return ['check-box-list.js'];";i:225;s:5:"    }";i:226;s:0:"";i:227;s:7:"    /**";i:228;s:61:"     * @return array me-return array hasil proses expression.";i:229;s:7:"     */";i:230;s:35:"    public function processExpr() {";i:231;s:36:"        if ($this->listExpr != "") {";i:232;s:39:"            if (FormField::$inEditor) {";i:233;s:33:"                $this->list = '';";i:234;s:38:"                return ['list' => ''];";i:235;s:13:"            }";i:236;s:0:"";i:237;s:34:"            ## evaluate expression";i:238;s:65:"            $this->list = $this->evaluate($this->listExpr, true);";i:239;s:0:"";i:240;s:59:"            ## change sequential array to associative array";i:241;s:74:"            if (is_array($this->list) && !Helper::is_assoc($this->list)) {";i:242;s:59:"                $this->list = Helper::toAssoc($this->list);";i:243;s:13:"            }";i:244;s:77:"        } else if (is_array($this->list) && !Helper::is_assoc($this->list)) {";i:245;s:55:"            $this->list = Helper::toAssoc($this->list);";i:246;s:9:"        }";i:247;s:0:"";i:248;s:34:"        $this->formattedList = [];";i:249;s:36:"        if (is_array($this->list)) {";i:250;s:45:"            foreach ($this->list as $k=>$v) {";i:251;s:42:"                $this->formattedList[] = [";i:252;s:33:"                    'text' => $v,";i:253;s:33:"                    'value' => $k";i:254;s:18:"                ];";i:255;s:13:"            }";i:256;s:9:"        }";i:257;s:0:"";i:258;s:16:"        return [";i:259;s:33:"            'list' => $this->list";i:260;s:10:"        ];";i:261;s:5:"    }";i:262;s:0:"";i:263;s:7:"    /**";i:264;s:21:"     * getLayoutClass";i:265;s:89:"     * Fungsi ini akan mengecek nilai property $layout untuk menentukan nama Class Layout";i:266;s:66:"     * @return string me-return string Class layout yang digunakan";i:267;s:7:"     */";i:268;s:38:"    public function getLayoutClass() {";i:269;s:68:"        return ($this->layout == 'Vertical' ? 'form-vertical' : '');";i:270;s:5:"    }";i:271;s:0:"";i:272;s:7:"    /**";i:273;s:103:"     * @return string me-return string Class error jika terdapat error pada satu atau banyak attribute.";i:274;s:7:"     */";i:275;s:37:"    public function getErrorClass() {";i:276;s:74:"        return (count($this->errors) > 0 ? 'has-error has-feedback' : '');";i:277;s:5:"    }";i:278;s:0:"";i:279;s:7:"    /**";i:280;s:20:"     * getlabelClass";i:281;s:78:"     * Fungsi ini akan mengecek $layout untuk menentukan layout yang digunakan";i:282;s:59:"     * dan me-load option label dari property $labelOptions";i:283;s:50:"     * @return string me-return string Class label";i:284;s:7:"     */";i:285;s:37:"    public function getlabelClass() {";i:286;s:42:"        if ($this->layout == 'Vertical') {";i:287;s:47:"            $class = "control-label col-sm-12";";i:288;s:16:"        } else {";i:289;s:64:"            $class = "control-label col-sm-{$this->labelWidth}";";i:290;s:9:"        }";i:291;s:0:"";i:292;s:48:"        $class .= @$this->labelOptions['class'];";i:293;s:22:"        return $class;";i:294;s:5:"    }";i:295;s:0:"";i:296;s:7:"    /**";i:297;s:23:"     * getFieldColClass";i:298;s:45:"     * Fungsi ini untuk menetukan width field";i:299;s:44:"     * @return string me-return string class";i:300;s:7:"     */";i:301;s:40:"    public function getFieldColClass() {";i:302;s:87:"        return "col-sm-" . ($this->layout == 'Vertical' ? 12 : 12 - $this->labelWidth);";i:303;s:5:"    }";i:304;s:0:"";i:305;s:7:"    /**";i:306;s:14:"     * checked";i:307;s:77:"     * Fungsi ini untuk mengecek value dari field ada dalam sebuah array list";i:308;s:27:"     * @param string $value";i:309;s:52:"     * @return string me-return string hasil checked";i:310;s:7:"     */";i:311;s:37:"    public function checked($value) {";i:312;s:46:"        if ($this->convertToString == 'Yes') {";i:313;s:47:"            $list = explode(',', $this->value);";i:314;s:44:"        } else if (is_array($this->value)) {";i:315;s:33:"            $list = $this->value;";i:316;s:45:"        } else if (is_string($this->value)) {";i:317;s:35:"            $list = [$this->value];";i:318;s:16:"        } else {";i:319;s:23:"            $list = [];";i:320;s:9:"        }";i:321;s:0:"";i:322;s:66:"        return in_array($value, $list) ? 'checked="checked"' : '';";i:323;s:5:"    }";i:324;s:0:"";i:325;s:39:"    public function getRelationInfo() {";i:326;s:40:"        if ($this->mode == "Relation") {";i:327;s:66:"            $rel = $this->model->metaData->relations[$this->name];";i:328;s:37:"            $class = $rel->className;";i:329;s:37:"            $model = $class::model();";i:330;s:12:"            ";i:331;s:20:"            return [";i:332;s:49:"                'foreignKey' => $rel->foreignKey,";i:333;s:42:"                'type' => get_class($rel),";i:334;s:38:"                'className' => $class,";i:335;s:76:"                'parentPrimaryKey' => $this->model->tableSchema->primaryKey,";i:336;s:47:"                'targetKey' => $this->relField,";i:337;s:70:"                'attributes' => $model->getAttributesWithoutRelation()";i:338;s:14:"            ];";i:339;s:9:"        }";i:340;s:5:"    }";i:341;s:0:"";i:342;s:45:"    public function getPostName($mode = '') {";i:343;s:64:"        return str_replace("]", $mode . "]", $this->renderName);";i:344;s:5:"    }";i:345;s:4:"    ";i:346;s:37:"    public function getDeleteData() {";i:347;s:65:"        $relChanges   = $this->model->getRelChanges($this->name);";i:348;s:4:"    ";i:349;s:37:"        return $relChanges['delete'];";i:350;s:5:"    }";i:351;s:7:"    /**";i:352;s:13:"     * render";i:353;s:54:"     * Fungsi ini untuk me-render field dan atributnya";i:354;s:86:"     * @return mixed me-return sebuah field dan atribut checkboxlist dari hasil render";i:355;s:7:"     */";i:356;s:30:"    public function render() {";i:357;s:52:"        $this->addClass('form-group form-group-sm');";i:358;s:44:"        $this->addClass($this->layoutClass);";i:359;s:43:"        $this->addClass($this->errorClass);";i:360;s:0:"";i:361;s:55:"        $this->addClass('input-group', 'fieldOptions');";i:362;s:54:"        $this->addClass('input-list', 'fieldOptions');";i:363;s:48:"        if ($this->itemLayout == "Horizontal") {";i:364;s:54:"            $this->addClass('inline', 'fieldOptions');";i:365;s:9:"        }";i:366;s:0:"";i:367;s:94:"        $this->setDefaultOption('ng-model', "model['{$this->originalName}']", $this->options);";i:368;s:29:"        $this->processExpr();";i:369;s:60:"        return $this->renderInternal('template_render.php');";i:370;s:5:"    }";i:371;s:0:"";i:372;s:1:"}";}s:7:"methods";a:12:{s:18:"getFieldProperties";a:2:{s:4:"line";i:11;s:6:"length";i:155;}s:9:"includeJS";a:2:{s:4:"line";i:223;s:6:"length";i:3;}s:11:"processExpr";a:2:{s:4:"line";i:230;s:6:"length";i:32;}s:14:"getLayoutClass";a:2:{s:4:"line";i:268;s:6:"length";i:3;}s:13:"getErrorClass";a:2:{s:4:"line";i:275;s:6:"length";i:3;}s:13:"getlabelClass";a:2:{s:4:"line";i:285;s:6:"length";i:10;}s:16:"getFieldColClass";a:2:{s:4:"line";i:301;s:6:"length";i:3;}s:7:"checked";a:2:{s:4:"line";i:311;s:6:"length";i:13;}s:15:"getRelationInfo";a:2:{s:4:"line";i:325;s:6:"length";i:16;}s:11:"getPostName";a:2:{s:4:"line";i:342;s:6:"length";i:3;}s:13:"getDeleteData";a:2:{s:4:"line";i:346;s:6:"length";i:5;}s:6:"render";a:2:{s:4:"line";i:356;s:6:"length";i:15;}}}i:1;N;}